async function loadClips(){let e=new DataTable("#clipsTable",{language:{emptyTable:'<div class="spinner-border" role="status"><span class="visually-hidden">Loading...</span></div> Loading clips list...'}});try{let t=await fetch("/clips/clips.json"),n=await t.json(),r=[];for(let e=0;e<n.length;e++){let t=n[e].creator_name||"no username";"livestreamfails.com mirror"==t&&(t=`<a href="${n[e].reddit_link}" target="_blank" rel="noopener noreferrer" class="no-decoration">livestreamfails.com mirror</a>`);let a=escapeString(n[e].title)||"no title";r.push([`${a} ${n[e]?.broadcaster_name?`<span class="text-body-secondary"> | (${n[e].broadcaster_name} clip)</span>`:""}`,escapeString(n[e].game_name||"no game"),n[e].duration,n[e].view_count.toLocaleString(),n[e].created_at,t,`<a href="/clip#${n[e]._id}${n[e]?.broadcaster_name?`_${n[e].broadcaster_name.toLowerCase()}`:""}" target="_blank" rel="noopener noreferrer" class="no-decoration">Link</a>`])}e.rows.add(r).draw()}catch(e){document.querySelector("#clipsTable > tbody > tr > td").innerHTML=`Could not load clips :(<br>${e}`,console.log(e)}}async function playClip(){let e=location.hash?.replace("#","")?.trim();if(console.log(e),e){e.includes("_")?(document.getElementById("clipPlayer").src=`https://f003.backblazeb2.com/file/${e.split("_").pop()}-clips/${e.split("_")[0]}.mp4`,e=e.split("_")[0]):document.getElementById("clipPlayer").src=`https://f003.backblazeb2.com/file/forsen-clips/${e}.mp4`;let t=await fetch("/clips/clips.json"),n=(await t.json()).find((t=>t._id===e));if(n){let e=n.creator_name||"no username";"livestreamfails.com mirror"==e&&(e=`<a href="${n.reddit_link}" target="_blank" rel="noopener noreferrer" class="no-decoration">livestreamfails.com mirror</a>`),document.getElementById("clipTitle").innerHTML=`${escapeString(n.title||"no title")} - ${escapeString(n.game_name||"no game")}`,document.getElementById("clipInfo").innerHTML=`${n.view_count.toLocaleString()} ${1==n.view_count?"view":"views"} - Clipped by ${e} on ${n.created_at}`}else document.getElementById("clipTitle").innerHTML="Clip info not found",document.getElementById("clipInfo").innerHTML="Clip info not found"}else document.getElementById("clipTitle").innerHTML="No Clip ID provided",document.getElementById("clipInfo").innerHTML='Go back to the <a href="/clips/"  rel="noopener noreferrer" class="no-decoration">Clips page</a> to search for clips'}function escapeString(e){return assertString(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}function assertString(e){if(!("string"==typeof e||e instanceof String)){let t=_typeof(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}}
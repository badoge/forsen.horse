async function loadClips(){let e=new DataTable("#clipsTable",{language:{emptyTable:"loading..."}});try{let n=await fetch("/clips/clips.json"),t=await n.json();console.log(t);for(let n=0;n<t.length;n++)e.row.add([escapeString(t[n].title||"no title"),escapeString(t[n].game_name||"no game"),t[n].duration,t[n].view_count.toLocaleString(),t[n].created_at,t[n].creator_name||"no username",`<a href="/clip#${t[n]._id}" target="_blank" rel="noopener noreferrer" class="no-decoration">Link</a>`]);e.draw(!1)}catch(e){console.log(e)}}async function playClip(){let e=location.hash?.replace("#","")?.trim();if(console.log(e),e){document.getElementById("clipPlayer").src=`https://clips.forsen.horse/${e}`;let n=await fetch("/clips/clips.json"),t=(await n.json()).find((n=>n._id===e));t?(document.getElementById("clipTitle").innerHTML=`${escapeString(t.title||"no title")} - ${escapeString(t.game_name||"no game")}`,document.getElementById("clipInfo").innerHTML=`${t.view_count} ${1==t.view_count?"view":"views"} - Clipped by ${t.creator_name||"no username"} on ${t.created_at}`):(document.getElementById("clipTitle").innerHTML="Clip info not found",document.getElementById("clipInfo").innerHTML="Clip info not found")}else document.getElementById("clipTitle").innerHTML="No Clip ID provided",document.getElementById("clipInfo").innerHTML='Go back to the <a href="/clips/"  rel="noopener noreferrer" class="no-decoration">Clips page</a> to search for clips'}function escapeString(e){return assertString(e),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")}function assertString(e){if(!("string"==typeof e||e instanceof String)){let n=_typeof(e);throw null===e?n="null":"object"===n&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}